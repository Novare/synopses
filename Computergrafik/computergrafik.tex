\documentclass[10pt,a4paper]{article}
\author{Jannik Koch}
\title{Computergrafik}

\usepackage[utf8]{inputenc}
\usepackage[ngerman]{babel}
\usepackage{multicol}
\usepackage{amsmath}
\usepackage[a4paper, total={6in, 8in}]{geometry}
\usepackage{mathrsfs}
\usepackage{hyperref}
\usepackage[style=super, toc, xindy, nogroupskip, nonumberlist]{glossaries}

\def\realnumbers{{\rm I\!R}}
\def\polynomials{{\rm I\!P}}

\newcommand{\rom}[1]{\uppercase\expandafter{\romannumeral #1\relax}}
\newcommand{\norm}[1]{\lVert#1\rVert}
\renewcommand{\arraystretch}{1.5}

\renewcommand{\glsnamefont}[1]{\textbf{#1}}
\setlength{\glsdescwidth}{0.75\textwidth}
\makenoidxglossaries

\input{glossary.tex}

\begin{document}
	\pagenumbering{Roman}
	{\let\newpage\relax\maketitle}
	\tableofcontents
	\newpage
	\pagenumbering{arabic}
	\setcounter{page}{1}

	\section{Bilder, Farbe, Perzeption}
	\subsection{Rasterbilder}
	Rasterbilder als hauptsächlicher Fokus (statt z.B Vektorgrafik)
	\begin{itemize}
		\item Bild ist rechteckiges Pixelgitter endlicher Pixelzahl
		\item Digitaler \Gls{framebuffer} als Kopie des Monitorbildes
		\item Pixel haben bestimmte \Gls{farbtiefe}
		\begin{itemize}
			\item Schwarz/Weiß (1 Bit/Pixel), Graustufen (8 Bit/Pixel), True Color (24 Bit/Pixel)
			\item Farbe mit Farbtabelle (lookup table, \glqq LUT\grqq) und High Dynamic Range (3 x 32 Bit Floating Point/Pixel)
			\item Farbe wird i.d.R. durch RGB-Wert (Rot-Grün-Blau) charakterisiert
		\end{itemize}
	\end{itemize}

	\subsection{Bildtransfer zum Display}
	Die Umsetzung eines digitalen Bildes zu einem sichtbaren Bild auf einem Display kann als Transferfunktion f betrachtet werden. Displaycharakteristika beeinflussen diese Darstellung, darunter:
	\begin{itemize}
		\item Maximale Displayhelligkeit $I_{max}$
		\item Minimale Displayhelligkeit $I_{min}$ (Helligkeit eines schwarzen Pixels)
		\item Reflektiertes Umgebungslicht k
	\end{itemize}
	womit sich der erreichbare Kontrast $R_d = \frac{I_{max} + k}{I_{min} + k}$ ergibt. Man benötigt eine Transferfunktion, bei welcher der Unterschied zwischen aufeinanderfolgenden Pixelwerten nicht bemerkbar (unter 2\%) ist, um \Gls{color banding} zu vermeiden.

	\subsection{Gamma-Korrektur}
	\textbf{Problem}:\\
	Digitale Pixelwerte befinden sich in einem linearen Raum, d.h. doppelter Wert impliziert doppelte Helligkeit. Displays verhalten sich nicht linear, weshalb die Pixelwerte auf das Display angepasst werden müssen.
	\\\\
	Dieses Displayverhalten wird durch einen Gamma-Wert ($\gamma$) charakterisiert, die entsprechende Korrektur heißt \Gls{gamma-korrektur}. Die Intensität wächst nicht proportional zum Farbwert n bei N Schritten, sondern proportional zu $(\frac{n}{N})^{\gamma}$. Zur \Gls{gamma-korrektur} wird entsprechend jeder Farbkanal-Wert mit $\frac{1}{\gamma}$ potenziert.

	\subsection{Alpha-Kanal}
	Zusätzlich zu RGB-Farbwerten wird oftmals auch ein Alpha-Kanal gespeichert, dessen Inhalt die \Gls{opazitaet} des Pixels ist.

	\subsection{Licht}
	\begin{itemize}
		\item Licht ist elektromagnetische Strahlung mit verschiedenen Charakteristika von Strahlen, Wellen und Teilchen
		\item Licht besitzt eine Wellenlänge $\lambda$, die u.a. eine Spektralfarbe repräsentiert (Lichtfrequenz $v = \frac{c}{\lambda}$)
		\item Sichtbares Licht: $380nm < \lambda < 700nm$
		\item Licht verschiedener Wellenlängen und verschiedener Intensitäten setzen weitere Farben zusammen
		\item \Gls{metamerismus}: Unterschiedliche Spektren ergeben dieselbe Farbe
	\end{itemize}

	\subsection{Farbräume}
	\textbf{Allgemein}:\\
	Ein \textbf{\Gls{farbmodell}} ermöglicht die Beschreibung von Farben durch Wertetupel, jedes \Gls{farbmodell} erzeugt einen \textbf{\Gls{farbraum}} aller möglichen Farben und diese können durch entsprechende \textbf{\Gls{tristimuluswerte}} beschrieben werden.

	\begin{itemize}
		\item Jeder Farbeindruck kann mit 3 Grundgrößen beschrieben werden (Graßmannsche Gesetze)
		\item Additive Farbmischung (vgl. RGB-\Gls{farbmodell})
		\begin{itemize}
			\item Summe der \Gls{tristimuluswerte} Rot, Grün und Blau ergibt finalen Farbwert
		\end{itemize}
		\item Subtraktive Farbmischung (vgl. CMY(K)-\Gls{farbmodell})
		\begin{itemize}
			\item Statt RGB: Cyan, Magenta, Yellow (und in der Praxis Schwarz als 4. Key-Color, da CMY typischerweise kein Schwarz ergibt)
			\item Differenz der Farbwerte ergibt finalen Farbwert
		\end{itemize}
		\item Weder additiv noch subtraktiv (vgl. HSV-\Gls{farbmodell})
		\begin{itemize}
			\item Charakterisierung der finalen Farbe durch Farbton (Hue), Sättigung (Saturation) und Helligkeit (Value)
		\end{itemize}
	\end{itemize}

	\newpage
	\subsection{Farbraumkonversion}
	\textbf{Ziel}: \Gls{farbraum} zur standardisierten Konversion zwischen Farbräumen.\\\\
	\textbf{Color Matching Funktionen}
		\begin{itemize}
			\item Reproduktion von Spektralfarben durch RGB-Primärfarben
			\item RGB ist kein perfekter \Gls{farbraum}, manche Spektralfarben sind nicht realisierbar!
		\end{itemize}		
	\textbf{XYZ-\Gls{farbraum}}
		\begin{itemize}
			\item Beschreibt alle wahrnehmbaren Farben (\glqq Gamut der menschlichen Wahrnehmung\grqq) mit rein positiven Color Matching Funktionen
			\item Primärfarben sind imaginär, übersaturiert und nicht physikalisch realisierbar
			\item Lineare Abbildung $XYZ \Leftrightarrow RGB$, Transformationsmatrix $M$
			\item Problem: $M^{-1}$ enthält negative Werte, XYZ kann auf negative, nicht darstellbare RGB Werte abbilden
		\end{itemize}
	\textbf{xyY-\Gls{farbraum}}
		\begin{itemize}
			\item Beobachtung: $kX, kY, kZ (k > 0)$ repräsentiert dieselbe Farbe mit unterschiedlicher Intensität
			\item Idee: Normalisierung auf der $X + Y + Z = 1$ Ebene, daraufhin Projektion auf die XY-Ebene (z weglassen)
			\item Ergebnis: Weiterhin alle Farbtöne und -sättigungen in XY erhalten, neuer xyY \Gls{farbraum} mit Helligkeit Y und Farbe/Chromatizität xy
		\end{itemize}

	\newpage
	\section{Raytracing}

	\subsection{Grundlagen}
	\begin{itemize}
		\item Bildsynthese durch Simulation des Lichttransports
		\item System ähnlich einer Lochkamera, definiert durch Position, Blickrichtung und vertikaler Orientierung (up-Vektor)
		\item Emittieren von \glqq Lichtstrahlen\grqq\ durch jeden Pixel, zurückverfolgen von der Kamera aus
		\item Prüfen auf Intersektion mit vorhandener Geometrie; sollte eine Intersektion gefunden werden:
			\begin{itemize}
				\item Wähle das getroffene Objekt und dessen Material-Eigenschaften $\Rightarrow$ \Gls{shading}-Berechnungen
				\item ggf. Verfolgen von weiteren Strahlen ab einer Intersektion (z.B bei spiegelndem Material)
			\end{itemize}
	\end{itemize}

	\subsection{Ray Generation - Mathematische Aspekte}
		\begin{itemize}
			\item Strahl wird durch eine Startposition und eine normierte Richtung modelliert, die um $t \in \realnumbers$ skaliert wird
			\item Allgemein für einen Strahl $r$: $r = e + t * d$ mit der Startposition e und der Richtung d
			\item Bei der Suche nach einem Schnittpunkt wird i.d.R. ein passendes t ausgerechnet, sodass r auf den Schnittpunkt zeigt
		\end{itemize}

	\subsubsection{Baryzentrische Koordinaten}
		Annahme:
		\begin{itemize}
			\item Es existieren k Punkte $P_1, ..., P_k \in \realnumbers^n, k \leq n + 1$
			\item Existiert dann ein Punkt Q der Form $Q = \lambda_1P_1 + \lambda_2P_2 + ... + \lambda_kP_k, \lambda_1 + \lambda_2 + ... + \lambda_k = 1$ (\glqq Affinkombination\grqq)
		\end{itemize}

		Dann definiert man $(\lambda_1, \lambda_2, ..., \lambda_k)$ als die baryzentrischen Koordinaten von Q bzgl. der Basispunkte $P_1, ..., P_k$. Hiermit lässt sich z.B ein Punkt innerhalb eines Dreiecks anhand der Eckpunkte beschreiben (z.B um zu testen ob ein Punkt in einem Dreieck liegt).

	\newpage
	\subsection{Ray Casting - Schnittpunktberechnung}
	\subsubsection{Strahl-Kugel}
		\begin{itemize}
			\item Implizite Darstellung einer Kugel: $|x - c|^2 - r^2 = 0$ mit Radius r und Mittelpunkt c
			\item Damit lassen sich Werte für $t_{1,2}$ (vgl. Mathematische Aspekte) anhand der Mitternachtsformel berechnen, wenn man die Variablen folgendermaßen wählt
			\begin{itemize}
				\item $a = d * d$
				\item $b = 2d * (e - c)$
				\item $c = (e - c) * (e - c) - r^2$
			\end{itemize}
			\item Kein Schnitt: Diskriminante kleiner 0
			\item Kugel wird gestriffen: Beide t-Werte sind identisch
			\item Sonst: Kugelschnitt, zwei verschiedene t-Werte
			\item Hinweis: Nur $t > 0$ sind relevant!
		\end{itemize}

	\subsubsection{Strahl-Ebene}
		\begin{itemize}
			\item Implizite Darstellung einer Ebene: $x * n - d_U = 0$ mit dem Normalenvektor n und dem Abstand vom Ursprung $d_U$
			\item Damit lassen sich Werte für $t$ (vgl. Mathematische Aspekte) anhand der Formel $t = \frac{d_U - e * n}{d * n}$
			\item Achtung: Ist der Nenner $d * n = 0$ sind Strahl und Ebene parallel!
			\item Hinweis: Nur $t > 0$ sind relevant!
		\end{itemize}

	\subsubsection{Strahl-Dreieck}
		\begin{itemize}
			\item Baryzentrische Darstellung eines Punktes in einem Dreieck bestehend aus Punkten $P_1, P_2, P_3: Q = P_1 + \lambda_2(P_2 - P_1) + \lambda_3(P_3 - P_1)$
			\item Anmerkung: $\lambda_1$ ist kein Faktor, die baryzentrischen Koordinaten spannen quasi ein schiefwinkliges Koordinatensystem auf mit dem Ursprung $P_1$
			\item Damit lassen sich Werte für $t$ (vgl. Mathematische Aspekte) durch Lösen der Gleichung $e + t * d = P_1 + \lambda_2(P_2 - P_1) + \lambda_3(P_3 - P_1)$ nach t finden
			\item Achtung: Ist die Gleichung lösbar, so liegt der Schnittpunkt \textbf{in der Ebene des Dreiecks}, damit der Schnittpunkt im Dreieck liegt muss gelten: $\lambda_2, \lambda_3 \geq 0$ und $\lambda_2 + \lambda_3 \leq 1$
			\item Hinweis: Nur $t > 0$ sind relevant!
		\end{itemize}

	\subsection{Shading}
	\begin{itemize}
		\item Wörtlich "Schattierung"
		\item Simulation von Oberflächeneigenschaften
		\item Ermöglicht realistische Tiefenwahrnehmung
	\end{itemize}

	\subsubsection{Materialien}
	\begin{itemize}
		\item Beschreibt Oberflächeneigenschaften
		\item Dadurch: Einfluss auf die Reaktion bei Lichteinfall
		\begin{itemize}
			\item Mattes Material wirkt in erster Linie diffus (keine klare Spiegelung, sehr weich, Licht wird in viele Richtungen gestreut)
			\item Glänzendes/Imperfekt spiegelndes Material besitzt weiche, verschwommene Spiegelungen (\glqq glossy\grqq, zwischen diffus und spekular)
			\item Perfekt spiegelndes Material spiegelt ähnlich wie ein gewöhnlicher Spiegel (\glqq specular\grqq, kaum Streuung)
		\end{itemize}
		\item Reflexionen beschreibt man durch Bidirektionale Reflektanzverteilungsfunktionen (\Gls{brdf})
		\begin{itemize}
			\item Generiert durch reale Materialproben sowie Modelle aus Physik und Phänomenologie
			\item Beschreibt Verhältnis von einfallendem zu ausfallendem Licht
			\item Erweiterung auf Transmission (ins Material eindringendes Licht): Bidirectional Transmission Distribution Function (\Gls{btdf})
			\item \Gls{brdf} + \Gls{btdf} = \Gls{bsdf} (Bidirectional Scattering Distribution Function)
		\end{itemize}
	\end{itemize}

	\subsubsection{Phong-Beleuchtungsmodell}
	\begin{itemize}
		\item Phänomenologisches Modell, modelliert Beleuchtung anhand dreier Komponenten, die aufsummiert den Lichteinfluss ergeben
		\begin{itemize}
			\item Ambient: Grundhelligkeit durch indirekte Beleuchtung
			\item Diffus: Grobe Beleuchtung nach dem Lambertschen Gesetz (beschreibt die Intensitätsabschwächung je nach Material)
			\item Spekular: Imperfekte Spiegelung, \glqq Highlights\grqq
		\end{itemize}
		\item \Gls{ambienteslicht} ist grundsätzlich immer vorhanden
		\item \Gls{diffuseslicht} ergibt sich aus dem diffusen Materialfaktor, der Lichtintensität und dem Punktprodukt von Lichtrichtung und Oberflächennormale
		\item \Gls{spekulareslicht} ergibt sich aus dem spekularen Materialfaktor, der Lichtintensität und dem Punktprodukt von Lichtreflektionsrichtung und Blickrichtung der Kamera hoch \glqq Phong-Exponent\grqq\ n
		\item Die Lichtintensität nimmt mit zunehmender Entfernung zur Lichtquelle ab!
		\item In der Regel werden die Punktprodukte auf 0 und größer \glqq geclampt\grqq, damit z.B Licht von der Rückseite nicht die Vorderseite beleuchtet
	\end{itemize}

	\subsection{Schattierung von Dreiecksnetzen}
	\begin{itemize}
		\item Objekt soll kantig erscheinen $\Rightarrow$ jedes Dreieck besitzt eine Normale, die für das \Gls{shading} des kompletten Dreiecks genutzt wird
		\item Objekt soll glatt erscheinen $\Rightarrow$ Interpolation; berechne gewichtete Summe der Normalen angrenzender Dreiecke für jeden Pixel
	\end{itemize}

	\subsection{Sekundärstrahlen}
	\begin{itemize}
		\item Sekundärstrahlen für \Gls{reflexion}:
			\begin{itemize}
				\item z.B Spiegelnde Metallkugel
				\item Bei Intersektion: Trace einen Reflexionsstrahl in die Reflexionsrichtung ab der Position $\epsilon$ Längeneinheiten vor der Intersektion (Vermeidung von erneutem Schneiden derselben Oberfläche) und addiere die resultierende Farbe gewichtet hinzu
			\end{itemize}
		\item Sekundärstrahlen für \Gls{transmission}:
			\begin{itemize}
				\item z.B Durchsichtige Glaskugel
				\item Bei Intersektion: Trace einen Transmissionsstrahl in die Transmissionsrichtung $\epsilon$ Längeneinheiten von der zweiten Intersektion der Kugel entfernt (Vermeidung von erneutem Schneiden derselben Oberfläche) und addiere die resultierende Farbe gewichtet hinzu
			\end{itemize}
	\end{itemize}

	\subsection{Aliasing}
	\begin{itemize}
		\item Problem: Scharfe, stufige Kanten (\glqq jaggies\grqq), da nur grob abgetastet wird
		\item Lösung: Anti-\Gls{aliasing}
		\begin{itemize}
			\item Überabtastung (mehrfaches Abtasten desselben Pixels mit leichten Offsets vom Pixelzentrum), dann gewichtete Summe für den Farbwert wählen
			\item Performance-intensiv! Für jeden Pixel müssen nun mehrere Strahlen verfolgt werden, u.U. mit Sekundärstrahlen
		\end{itemize}
	\end{itemize}

	\newpage
	\section{Transformationen}

	\newpage
	\section{Texturen}

	\newpage
	\section{Räumliche Datenstrukturen}

	\newpage
	\section{Rasterisierung und Projektion}

	\newpage
	\section{OpenGL und Grafik-Hardware}

	\newpage
	\printnoidxglossary
\end{document}
